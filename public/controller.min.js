var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,c,b){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(c.call(b,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,c,b,d){if(c){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in b||(b[e]={});b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");console.log=function(){};
var router=function(){return{genQR:function(a,c){new QRCode(document.getElementById(c),{text:"https://www.zerobase.io/s/"+a,width:300,height:300,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})},create:function(a,c){var b=Date.now(),d=new FormData;d.append("ip",a&&a.ip?a.ip:void 0);d.append("fingerprint",a&&a.fingerprint?a.fingerprint:void 0);jQuery.ajax({url:"/c/"+b,data:d,cache:!1,contentType:!1,processData:!1,type:"POST",success:function(b){console.log("Device ID Created:",
b.dvid);localStorage.setItem("dvid",String(b.dvid));$("#register-notice-agree").removeClass("btn-loading");$("#mobile-functions").removeClass("d-none");$("#registration-notice").addClass("d-none");$("#modal-register-notice").modal("hide");router.genQR(b.dvid,"qrcode");"true"===$("#modal-register-notice").attr("data-redirect")&&($("#modal-register-notice").attr("data-redirect","false"),$('a[href="#page-code"]').tab("show"));c&&c(a)},error:function(a){console.log(a)}})},createAlt:function(a,c){c=localStorage.getItem("dvid");
var b=localStorage.getItem("dvid_alt")?JSON.parse(localStorage.getItem("dvid_alt")).length:0,d=new FormData;d.append("dvid",c);d.append("dvid_c",b);d.append("ip",a&&a.ip?a.ip:void 0);d.append("fingerprint",a&&a.fingerprint?a.fingerprint:void 0);a={url:"/ca/"+c,data:d,cache:!1,contentType:!1,processData:!1,type:"POST",success:function(a){if(!0===a.success){console.log(a.dvid);var b=localStorage.getItem("dvid_alt")?JSON.parse(localStorage.getItem("dvid_alt")):[];b.push(a.dvid);localStorage.setItem("dvid_alt",
JSON.stringify(b));console.log(JSON.parse(localStorage.getItem("dvid_alt")));b=JSON.parse(localStorage.getItem("dvid_alt")).length;var c=$("#template-code-alt").clone();c.find(".title-code-alt").text("Alternative Code "+b);c.attr("data-id",a.dvid);c.removeAttr("id");c.removeClass("d-none");$("#alternative-code-group").append(c);$("#notice-alt-code").addClass("d-none")}else console.log("exceeded limit");$("#generate-alt-code").removeClass("btn-loading-dark")},error:function(a){$("#generate-alt-code").removeClass("btn-loading-dark");
console.log(a)}};(c=localStorage.getItem("dvid"))?jQuery.ajax(a):($("#generate-alt-code").removeClass("btn-loading-dark"),console.log("Cannot create Alt without Parent"))},displayAlt:function(){JSON.parse(localStorage.getItem("dvid_alt")).map(function(a,c){var b=$("#template-code-alt").clone();b.find(".title-code-alt").text("Alternative Code "+(c+1));b.attr("data-id",a);b.removeAttr("id");b.removeClass("d-none");$("#alternative-code-group").append(b)})},scan:function(a,c){var b=localStorage.getItem("dvid"),
d=new FormData;d.append("dvid",b);d.append("sdvid",a&&a.sdvid?a.sdvid:void 0);d.append("ip",a&&a.ip?a.ip:void 0);d.append("fingerprint",a&&a.fingerprint?a.fingerprint:void 0);jQuery.ajax({url:"/s-id/"+b,data:d,cache:!1,contentType:!1,processData:!1,type:"POST",success:function(b){!0===b.success?(console.log("Scan (Success):",b),$("#scan-notice-loading").addClass("d-none"),$("#scan-notice-success-datetime").text(new Date),JsBarcode("#scan-notice-barcode-id",b.scan),$("#scan-notice-success").removeClass("d-none")):
!1===b.success&&("ValidationError"===b.name?(console.log("Scan (Validation Error):",b),$("#scan-notice-loading").addClass("d-none"),$("#scan-notice-error-title").text("ID Error"),$("#scan-notice-error-code").text("Not a Zerobase ID"),$("#scan-notice-error-message").text("The ID you scanned is not a zerobase ID. Please inform the party that their ID is either damaged or not registered. We have registered this error.")):(console.log("Scan (Other Error):",b),$("#scan-notice-loading").addClass("d-none")),
$("#scan-notice-error").removeClass("d-none"));console.log("Scan (Callback):",c);console.log("Scan (Data):",a);c&&c()},error:function(a){console.log(a);console.log("Scan: Error");$("#scan-notice-loading").addClass("d-none");$("#scan-notice-error").removeClass("d-none");console.log("Scan Error (Callback):",c);console.log("Scan Error (Data):",data);c&&c()}})},fetchNews:function(){jQuery.ajax({url:"https://newsapi.org/v2/top-headlines?q=coronavirus&country=de&apiKey=84ca05784bfb4228b4dc2396fd09d950",
cache:!1,contentType:!1,processData:!1,type:"GET",success:function(a){"ok"===a.status&&a.articles&&(console.log("Fetched News:"),console.log(a),a.articles.map(function(a){var b=$("#template-news").clone();b.find(".news-href").attr("href",a.url);b.find(".news-source").text(a.source.name);b.find(".news-title").text(a.title);b.find(".news-published").text(a.publishedAt);b.find(".news-image").css("background-image","url("+a.urlToImage+")");b.removeAttr("id");b.removeClass("d-none");$("#news-feed-container").append(b)}))},
error:function(a){console.log(a)}})},fetchIP:function(a,c){jQuery.ajax({url:"https://api.ipify.org?format=json",cache:!1,contentType:!1,processData:!1,type:"GET",success:function(b){console.log("IP (Success):",b);console.log("IP (Callback):",c);console.log("IP (Data):",b);if(c&&a)a.ip=b.ip,c(a);else return b.ip},error:function(b){console.log(b);if(c&&a)a.ip=ipObj.ip,c(a);else return b}})},fingerprint:function(a,c){var b=function(){var b=new Date;Fingerprint2.get(function(d){d=Fingerprint2.x64hash128(d.map(function(a){return a.value}).join(),
31);console.log("Fingerprint (Time):",new Date-b);console.log("Fingerprint (Generated):",d);if(c&&a)console.log("Fingerprint >1 (Callback):",c),console.log("Fingerprint >1 (Data):",a),a.fingerprint=d,c(a);else return d})};window.requestIdleCallback?(console.log("Fingerprint: requestIdleCallback"),requestIdleCallback(b)):(console.log("Fingerprint: setTimeout"),setTimeout(b,500))},init:function(){console.log("Initialized");if(750>window.innerWidth){$("#mobile-functions").removeClass("d-none");$("#desktop-notice").addClass("d-none");
var a=localStorage.getItem("dvid"),c=localStorage.getItem("dvid_alt")?JSON.parse(localStorage.getItem("dvid_alt")).length:0;a?(console.log("Initialized with Device ID."),1<$("#qrcode").children().length?console.log("QR already generated"):router.genQR(a,"qrcode"),0<c&&(console.log("alts available:",c),router.displayAlt(),$("#alternative-code-card").removeClass("d-none"),$("#notice-alt-code").addClass("d-none"))):(console.log("no registered dvid"),$("#mobile-functions").addClass("d-none"),$("#registration-notice").removeClass("d-none"),
$("#modal-register-notice").modal("show"),$("body").on("click","#register-notice-agree",function(a){$("#register-notice-agree").addClass("btn-loading");router.fetchIP({},function(a){router.fingerprint(a,function(a){console.log("cancel-route: register -> create:",a);router.create(a)})})}))}}}}();
$(function(){function a(a,b,c){g.beginPath();g.moveTo(a.x,a.y);g.lineTo(b.x,b.y);g.lineWidth=4;g.strokeStyle=c;g.stroke()}function c(){h=void 0;if(k.readyState===k.HAVE_ENOUGH_DATA){l.hidden=!1;l.height=k.videoHeight;l.width=k.videoWidth;g.drawImage(k,0,0,l.width,l.height);var b=g.getImageData(0,0,l.width,l.height);if(b=jsQR(b.data,b.width,b.height,{inversionAttempts:"dontInvert"})){a(b.location.topLeftCorner,b.location.topRightCorner,"#1AAD19");a(b.location.topRightCorner,b.location.bottomRightCorner,
"#1AAD19");a(b.location.bottomRightCorner,b.location.bottomLeftCorner,"#1AAD19");a(b.location.bottomLeftCorner,b.location.topLeftCorner,"#1AAD19");var d=document.createElement("a");d.href=b.data;var e=d.protocol,f=d.hostname;d=d.pathname;var m=d.split("/")[1],n=d.split("/")[2];console.log(e,f,d,m,n);if("https:"==e&&"www.zerobase.io"==f&&"s"==m&&n){sound.play();window.location.replace(b.data);return}}}h||(h=window.requestAnimationFrame(c))}$(".info-slider").slick({lazyLoad:"ondemand",dots:!0,infinite:!0,
slidesToShow:3,slidesToScroll:3});[].slice.call(document.querySelectorAll("[data-mask]")).map(function(a){console.log("maskEl",a);return new IMask(a,{mask:a.dataset.mask,lazy:"true"===a.dataset["mask-visible"]})});var b=document.createElement("a");b.href=window.location.href;var d=b.protocol,e=b.hostname,f=b.pathname;b=f.split("/")[1];var m=f.split("/")[2];f=localStorage.getItem("dvid");"https:"!=d||"www.zerobase.io"!=e&&"zerobase.io"!=e||"s"!=b||!m?("s"==b?(console.log("Invalid Access Point"),window.history.replaceState({},
"Home","/")):console.log("No Conditions Met"),router.init()):(console.log("Scan Access Point"),window.history.replaceState({},"Home","/"),f?(console.log("Has registered ID on scan"),$("#modal-scan-notice").modal("show"),router.fetchIP({sdvid:m},function(a){router.fingerprint(a,function(a){router.scan(a,function(a){router.init()})})})):(console.log("Does not have registed ID on scan"),750>window.innerWidth&&$("#desktop-notice").addClass("d-none"),$("#mobile-functions").addClass("d-none"),$("#registration-notice").removeClass("d-none"),
$("#modal-register-notice").modal("show"),$("body").on("click","#register-notice-agree",function(a){$("#register-notice-agree").addClass("btn-loading");$("#modal-scan-notice").modal("show");router.fetchIP({sdvid:m},function(a){router.fingerprint(a,function(a){router.create(a,function(a){router.scan(a,function(a){router.init()})})})})})));$("body").on("click","#landing-about",function(a){console.log("hello");$('a[href="#tabs-about"]').tab("show")});$("body").on("click","#landing-generate",function(a){localStorage.getItem("dvid")?
$('a[href="#page-code"]').tab("show"):($("#modal-register-notice").attr("data-redirect","true"),$("#modal-register-notice").modal("show"))});$("body").on("click","#show-registration",function(a){$("#modal-register-notice").modal("show")});$("body").on("click","#nav-code",function(a){$('a[href="#page-code"]').tab("show");$(".notice-code").addClass("active");$(".notice-code .dimmer-notice").show()});$("body").on("click","#nav-main",function(a){$('a[href="#page-main"]').tab("show");$(".notice-code").addClass("active");
$(".notice-code .dimmer-notice").show()});$("body").on("click","#reveal-code",function(a){console.log("Reveal");$(".notice-code").removeClass("active");$(".notice-code .dimmer-notice").hide()});$("body").on("click",".reveal-code-alt",function(a){$("#qrcode-alt").empty();$("#qrcode-alt").append('<img class="qr-logo-overlay" src="/dist/img/qr_logo.png">');$(".notice-code").addClass("active");$(".notice-code .dimmer-notice").show();$(this).attr("data-id")?(router.genQR($(this).attr("data-id"),"qrcode-alt"),
$("#title-code-alt").text($(this).find(".title-code-alt").text()),$('a[href="#page-code-alt"]').tab("show")):console.log("error displaying alt")});$("body").on("click","#generate-alt-code",function(a){$("#generate-alt-code").addClass("btn-loading-dark");router.fetchIP({},function(a){router.fingerprint(a,function(a){router.createAlt(a)})})});$("body").on("click","#nav-scan",function(a){window.sound=new Howl({src:["/dist/audio/beep.mp3"]});$('a[href="#page-scan"]').tab("show");navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(function(a){k.srcObject=
a;k.setAttribute("playsinline",!0);k.play();h||(h=window.requestAnimationFrame(c));$("body").on("click","#nav-main-x",function(b){$('a[href="#page-main"]').tab("show");a.getTracks().forEach(function(a){a.stop()});h&&(window.cancelAnimationFrame(h),h=void 0)})})});var k=document.createElement("video"),l=document.getElementById("canvas"),g=l.getContext("2d");document.getElementById("loadingMessage");document.getElementById("output");document.getElementById("outputMessage");document.getElementById("outputData");
var h});